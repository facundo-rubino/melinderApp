{"ast":null,"code":"import _toConsumableArray from\"/Users/facundorubino/_dev/projects/react/MelinderApp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{useRef}from'react';import imgKeys from'../../img/car_interior.jpg';import{useDispatch,useSelector}from\"react-redux\";import{saveSearch}from\"../../features/searchesSlice\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var inpQuery=useRef(null);var navigate=useNavigate();var dispatch=useDispatch();var totalSearches=useSelector(function(state){return state.objSearches.searches;});var actualId=useSelector(function(state){return state.objSearches.searchId;});var getCars=function getCars(offset,arr){var textSent=inpQuery.current.value;var formattedQuery=textSent.charAt(0).toUpperCase()+textSent.toLowerCase().slice(1);var existentQuery=totalSearches.find(function(search){return search.q===formattedQuery;});if(formattedQuery!==\"\"&&!existentQuery){fetch(\"https://api.mercadolibre.com/sites/MLU/search?category=MLU1744&q= \".concat(formattedQuery,\" &offset=\")+offset).then(function(r){return r.json();}).then(function(res){var total=res.paging.total;var actual=res.paging.limit+res.paging.offset;var arrActual=[].concat(_toConsumableArray(arr),_toConsumableArray(res.results));if(actual<total){getCars(actual,arrActual);}else{var searchObject={id:actualId,q:formattedQuery,result:arrActual,favs:[],discarded:[]};if(totalSearches.length>0){dispatch(saveSearch([].concat(_toConsumableArray(totalSearches),[searchObject])));}else{dispatch(saveSearch([searchObject]));}navigate(\"/ShowSearch/\".concat(actualId));}});}else if(existentQuery){alert(\"Búsqueda existente\");navigate(\"/ShowSearch/\".concat(existentQuery.id));}else{alert(\"Escribí algo\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex h-screen bg-gray-200 overflow-y-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center h-auto pb-10 md:pb-0 md:w-1/2 my-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-2xl pt-6 mb-2 text-MLblue font-bold md:pt-0 md:mb-4\",children:\"Encontr\\xE1 el auto de tus sue\\xF1os\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center w-10/12 mb-4  text-MLblue\",children:[\"Melinder es la primer app en la que podr\\xE1s \",/*#__PURE__*/_jsx(\"strong\",{children:\" optimizar tus b\\xFAsquedas \"}),\" de autos realizadas en Mercado Libre. Agreg\\xE1 a \",/*#__PURE__*/_jsx(\"strong\",{children:\" favoritos \"}),\" para seguir de cerca tus autos m\\xE1s deseados, o \",/*#__PURE__*/_jsx(\"strong\",{children:\" descartalos\"}),\", para que no te cruces una y otra vez con el mismo resultado no deseado.\"]}),/*#__PURE__*/_jsx(\"input\",{ref:inpQuery,type:\"text\",className:\"w-4/5 py-3 rounded placeholder-MLblue pl-[14px] text-lg\",placeholder:\"Busc\\xE1 un auto...\"}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",onClick:function onClick(){return getCars(0,[]);},className:\"block mt-4 py-3 bg-MLblue w-1/3 rounded text-white text-2xl  cursor-pointer\",value:\"Buscar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-auto md:w-1/2 \",children:/*#__PURE__*/_jsx(\"img\",{className:\"object-cover h-max w-full\",src:imgKeys})})]});};export default Search;","map":{"version":3,"names":["useRef","imgKeys","useDispatch","useSelector","saveSearch","useNavigate","Search","inpQuery","navigate","dispatch","totalSearches","state","objSearches","searches","actualId","searchId","getCars","offset","arr","textSent","current","value","formattedQuery","charAt","toUpperCase","toLowerCase","slice","existentQuery","find","search","q","fetch","then","r","json","res","total","paging","actual","limit","arrActual","results","searchObject","id","result","favs","discarded","length","alert"],"sources":["/Users/facundorubino/_dev/projects/react/MelinderApp/src/components/Search/Search.js"],"sourcesContent":["import { useRef } from 'react';\nimport imgKeys from '../../img/car_interior.jpg';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveSearch } from \"../../features/searchesSlice\";\nimport { useNavigate } from 'react-router-dom';\n\nconst Search = () => {\n\n    const inpQuery = useRef(null);\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n    const totalSearches = useSelector(state => state.objSearches.searches);\n    let actualId = useSelector(state => state.objSearches.searchId);\n\n    const getCars = (offset, arr) => {\n        let textSent = inpQuery.current.value;\n        let formattedQuery = textSent.charAt(0).toUpperCase() + textSent.toLowerCase().slice(1);\n        let existentQuery = totalSearches.find(search => search.q === formattedQuery);\n\n        if (formattedQuery !== \"\" && !existentQuery) {\n            fetch(`https://api.mercadolibre.com/sites/MLU/search?category=MLU1744&q= ${formattedQuery} &offset=` + offset)\n                .then(r => r.json())\n                .then(res => {\n                    let total = res.paging.total;\n                    let actual = res.paging.limit + res.paging.offset;\n                    let arrActual = [...arr, ...res.results];\n                    if (actual < total) {\n                        getCars(actual, arrActual);\n                    } else {\n                        let searchObject = {\n                            id: actualId,\n                            q: formattedQuery,\n                            result: arrActual,\n                            favs: [],\n                            discarded: [],\n                        };\n                        if (totalSearches.length > 0) {\n                            dispatch(saveSearch([...totalSearches, searchObject]))\n                        }\n                        else {\n                            dispatch(saveSearch([searchObject]))\n                        }\n                        navigate(`/ShowSearch/${actualId}`);\n                    }\n                });\n        } else if (existentQuery) {\n            alert(\"Búsqueda existente\")\n            navigate(`/ShowSearch/${existentQuery.id}`);\n        } else {\n            alert(\"Escribí algo\")\n\n        }\n    }\n\n    return (\n        <div className=\"md:flex h-screen bg-gray-200 overflow-y-hidden\">\n\n            <div className=\"flex flex-col items-center h-auto pb-10 md:pb-0 md:w-1/2 my-auto\">\n                <h1 className=\"text-center text-2xl pt-6 mb-2 text-MLblue font-bold md:pt-0 md:mb-4\">Encontrá el auto de tus sueños</h1>\n                <p className=\"text-center w-10/12 mb-4  text-MLblue\">Melinder es la primer app en la que podrás <strong> optimizar tus búsquedas </strong> de autos realizadas en Mercado Libre.\n                    Agregá a <strong> favoritos </strong> para seguir de cerca tus autos más deseados, o <strong> descartalos</strong>, para que no te cruces\n                    una y otra vez con el mismo resultado no deseado.\n                </p>\n                <input ref={inpQuery} type=\"text\" className=\"w-4/5 py-3 rounded placeholder-MLblue pl-[14px] text-lg\" placeholder=\"Buscá un auto...\" />\n                <input type=\"button\" onClick={() => getCars(0, [])} className=\"block mt-4 py-3 bg-MLblue w-1/3 rounded text-white text-2xl  cursor-pointer\" value=\"Buscar\" />\n            </div>\n\n            <div className=\"h-auto md:w-1/2 \">\n                <img className=\"object-cover h-max w-full\" src={imgKeys} /></div>\n        </div>\n    )\n}\n\nexport default Search"],"mappings":"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"},"metadata":{},"sourceType":"module"}