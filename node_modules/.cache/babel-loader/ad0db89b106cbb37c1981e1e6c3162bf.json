{"ast":null,"code":"import _slicedToArray from\"/Users/facundorubino/_dev/projects/react/MelinderApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useSelector,useDispatch}from'react-redux';import{useParams,Link}from'react-router-dom';import{HiHeart,HiTrash}from\"react-icons/hi\";import{transformImageUrl,numberWithDots,formatCurrency}from'../../utils/utils';import{saveFav,discardItem}from\"../../features/searchesSlice\";import Loader from\"../Loader/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Card=function Card(_ref){var id=_ref.id,idML=_ref.idML,key=_ref.key,title=_ref.title,price=_ref.price,currency_id=_ref.currency_id,attributes=_ref.attributes,thumbnail=_ref.thumbnail;var dispatch=useDispatch();var _useParams=useParams(),idSearch=_useParams.idSearch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var totalSearches=useSelector(function(state){return state.objSearches.searches;});var year=attributes.find(function(attribute){return attribute.id===\"VEHICLE_YEAR\";});var km=attributes.find(function(attribute){return attribute.id===\"KILOMETERS\";});var manageCar=function manageCar(option,idML){setLoading(true);var selectedSearch=totalSearches.find(function(s){return s.id===Number(idSearch);});var selectedResult=selectedSearch.result;var selectedCar=selectedResult.find(function(car){return car.id===idML;});if(option===\"favorite\"){var newFav={idSearch:idSearch,car:selectedCar};dispatch(saveFav(newFav));}else{var newDiscard={idSearch:idSearch,car:selectedCar};dispatch(discardItem(newDiscard));}setLoading(false);};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded px-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-MLblue text-xl truncate ... py-3\",children:title}),/*#__PURE__*/_jsx(\"img\",{className:\"object-cover h-max w-full aspect-[4/3] \",src:transformImageUrl(thumbnail),alt:\"Imagen de \".concat(title)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center py-5 \",children:[/*#__PURE__*/_jsx(HiTrash,{className:\"m-auto text-5xl  hover:cursor-pointer fill-red-700 hover:rotate-3  transition-all ease-in \",onClick:function onClick(){return manageCar(\"discard\",idML);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-auto text-center \",children:[/*#__PURE__*/_jsxs(\"p\",{children:[formatCurrency(currency_id),\" \",numberWithDots(price),\"  \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[year.value_name,\" | \",numberWithDots(km.value_name)]}),/*#__PURE__*/_jsx(Link,{to:\"/CarDetail/\".concat(idSearch,\"/\").concat(idML),children:/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"bg-white p-2 rounded px-4 mt-2 text-MLblue border-2 border-MLblue hover:bg-MLblue hover:text-white  cursor-pointer transition-all ease-in duration-200\",value:\"M\\xE1s info\"})})]}),/*#__PURE__*/_jsx(HiHeart,{id:id,className:\"m-auto text-5xl  hover:cursor-pointer fill-MLgreen hover:rotate-3  transition-all ease-in\",onClick:function onClick(){return manageCar(\"favorite\",idML);}})]})]})});};export default Card;","map":{"version":3,"names":["useState","useSelector","useDispatch","useParams","Link","HiHeart","HiTrash","transformImageUrl","numberWithDots","formatCurrency","saveFav","discardItem","Loader","Card","id","idML","key","title","price","currency_id","attributes","thumbnail","dispatch","idSearch","loading","setLoading","totalSearches","state","objSearches","searches","year","find","attribute","km","manageCar","option","selectedSearch","s","Number","selectedResult","result","selectedCar","car","newFav","newDiscard","value_name"],"sources":["/Users/facundorubino/_dev/projects/react/MelinderApp/src/components/Card/Card.js"],"sourcesContent":["import { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams, Link } from 'react-router-dom';\nimport { HiHeart, HiTrash } from \"react-icons/hi\";\nimport { transformImageUrl, numberWithDots, formatCurrency } from '../../utils/utils';\nimport { saveFav, discardItem } from \"../../features/searchesSlice\";\nimport Loader from \"../Loader/Loader\"\n\n\nconst Card = ({ id, idML, key, title, price, currency_id, attributes, thumbnail }) => {\n    const dispatch = useDispatch();\n    let { idSearch } = useParams();\n    const [loading, setLoading] = useState(false)\n    const totalSearches = useSelector(state => state.objSearches.searches);\n\n    const year = attributes.find((attribute) => attribute.id === \"VEHICLE_YEAR\");\n    const km = attributes.find((attribute) => attribute.id === \"KILOMETERS\");\n\n    const manageCar = (option, idML) => {\n        setLoading(true);\n        let selectedSearch = totalSearches.find(s => s.id === Number(idSearch));\n        let selectedResult = selectedSearch.result;\n        let selectedCar = selectedResult.find(car => car.id === idML);\n\n        if (option === \"favorite\") {\n            let newFav = {\n                idSearch: idSearch,\n                car: selectedCar,\n            }\n            dispatch(saveFav(newFav));\n        } else {\n            let newDiscard = {\n                idSearch: idSearch,\n                car: selectedCar,\n            }\n            dispatch(discardItem(newDiscard));\n        }\n        setLoading(false);\n\n    }\n\n    return (\n        <>\n            {loading ? <Loader /> :\n                <div className=\"bg-white shadow rounded px-5\">\n                    <h2 className=\"text-MLblue text-xl truncate ... py-3\">{title}</h2>\n                    <img className=\"object-cover h-max w-full aspect-[4/3] \" src={transformImageUrl(thumbnail)} alt={`Imagen de ${title}`} />\n                    <div className=\"flex justify-center py-5 \">\n                        <HiTrash className=\"m-auto text-5xl  hover:cursor-pointer fill-red-700 hover:rotate-3  transition-all ease-in \" onClick={() => manageCar(\"discard\", idML)} />\n\n                        <div className=\"m-auto text-center \">\n                            <p>{formatCurrency(currency_id)} {numberWithDots(price)}  </p>\n                            <p>{year.value_name} | {numberWithDots(km.value_name)}</p>\n\n                            <Link to={`/CarDetail/${idSearch}/${idML}`} ><input type=\"button\" className=\"bg-white p-2 rounded px-4 mt-2 text-MLblue border-2 border-MLblue hover:bg-MLblue hover:text-white  cursor-pointer\n                    transition-all ease-in duration-200\" value=\"MÃ¡s info\" /></Link>\n                        </div>\n                        <HiHeart id={id} className=\"m-auto text-5xl  hover:cursor-pointer fill-MLgreen hover:rotate-3  transition-all ease-in\" onClick={() => manageCar(\"favorite\", idML)} />\n                    </div>\n                </div >\n            }\n        </>\n    )\n}\n\nexport default Card"],"mappings":"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"},"metadata":{},"sourceType":"module"}